{"ast":null,"code":"var _jsxFileName = \"/Users/mariahjadegardner/UTA/FA24/Research/string-theory/react-coloring/src/components/PaperControls.jsx\";\nimport React from 'react';\nimport { Icon, Button, Modal, ButtonGroup } from 'semantic-ui-react';\nimport paper from 'paper';\nimport axios from 'axios';\nimport FileSaver from 'file-saver';\nimport { BEAD_COLORS, BEAD_COLORS_NAMES } from '../AppConfig.jsx';\nimport { exportSVG } from '../javascripts/Paper.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaperControls = ({\n  selectedColor,\n  version,\n  projectName\n}) => {\n  const trashInteraction = () => {\n    paper.project.clear();\n  };\n  const handleExportSTL = async () => {\n    const prevZoom = paper.view.zoom;\n    paper.view.zoom = 1;\n    for (let colorIndex = 0; colorIndex < BEAD_COLORS.length; colorIndex++) {\n      const color = BEAD_COLORS[colorIndex];\n      const colorName = BEAD_COLORS_NAMES[colorIndex];\n\n      // Filter beads by color\n      const beadsToRemove = paper.project.getItems({\n        name: 'bead',\n        match: function (item) {\n          return item.fillColor && item.fillColor.toCSS(true) !== color;\n        }\n      });\n      beadsToRemove.forEach(bead => bead.remove());\n      const svgString = exportSVG();\n      const blob = new Blob([svgString], {\n        type: 'image/svg+xml'\n      });\n      const formData = new FormData();\n      formData.append('svg', blob, `design_${colorName}.svg`);\n\n      // Generate the filename based on project name, color, and version\n      const filename = `${projectName.toLowerCase().replace(/\\s+/g, '_')}_${colorName}_${version}.stl`;\n      try {\n        const response = await axios.post('https://orange-barnacle-vx575vg799c6qgq-3001.app.github.dev/convert-svg-to-stl', formData, {\n          responseType: 'blob'\n        });\n        FileSaver.saveAs(response.data, filename);\n      } catch (error) {\n        console.error(`Error exporting STL for color ${colorName}:`, error);\n      }\n\n      // Add back the removed beads\n      beadsToRemove.forEach(bead => paper.project.activeLayer.addChild(bead));\n    }\n    paper.view.zoom = prevZoom;\n  };\n  const handleExportSVG = selectedColor => {\n    const prevZoom = paper.view.zoom;\n    paper.view.zoom = 1;\n    console.log(\"Selected color:\", selectedColor, BEAD_COLORS); // Check selectedColor value\n\n    const colorIndex = BEAD_COLORS.findIndex(element => element === selectedColor);\n    const colorName = BEAD_COLORS_NAMES[colorIndex];\n    const filename = `${projectName.toLowerCase().replace(/\\s+/g, '_')}_${colorName}_${version}.svg`;\n    var beadsToRemove = paper.project.getItems({\n      name: 'bead',\n      match: function (item) {\n        return item.fillColor && item.fillColor.toCSS(true) !== selectedColor;\n      }\n    });\n    var beadsToKeep = paper.project.getItems({\n      name: 'bead',\n      match: function (item) {\n        return item.fillColor && item.fillColor.toCSS(true) === selectedColor;\n      }\n    });\n    beadsToRemove.forEach(bead => bead.remove());\n    const svgString = exportSVG();\n    console.log(\"Color name resolved:\", colorName, selectedColor); // Log the resolved color name\n    console.log(\"Filename:\", filename); // Log the filename being used\n    const blob = new Blob([svgString], {\n      type: 'image/svg+xml'\n    });\n    FileSaver.saveAs(blob, filename);\n    beadsToRemove.forEach(bead => paper.project.activeLayer.addChild(bead));\n    paper.view.zoom = prevZoom;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      trigger: /*#__PURE__*/_jsxDEV(Button, {\n        color: \"red\",\n        icon: true,\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          name: \"trash\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 43\n        }, this), \"Restart\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 18\n      }, this),\n      header: \"Are you sure you want to destroy your masterpiece?\",\n      content: \"This action cannot be undone.\",\n      actions: ['Keep It', {\n        key: 'done',\n        content: 'Nuke It',\n        positive: true,\n        onClick: trashInteraction\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ButtonGroup, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        icon: true,\n        onClick: () => handleExportSTL(selectedColor),\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          name: \"download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), \"STL\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: true,\n        onClick: () => handleExportSVG(selectedColor),\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          name: \"download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), \"SVG\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_c = PaperControls;\nexport { PaperControls };\nvar _c;\n$RefreshReg$(_c, \"PaperControls\");","map":{"version":3,"names":["React","Icon","Button","Modal","ButtonGroup","paper","axios","FileSaver","BEAD_COLORS","BEAD_COLORS_NAMES","exportSVG","jsxDEV","_jsxDEV","PaperControls","selectedColor","version","projectName","trashInteraction","project","clear","handleExportSTL","prevZoom","view","zoom","colorIndex","length","color","colorName","beadsToRemove","getItems","name","match","item","fillColor","toCSS","forEach","bead","remove","svgString","blob","Blob","type","formData","FormData","append","filename","toLowerCase","replace","response","post","responseType","saveAs","data","error","console","activeLayer","addChild","handleExportSVG","log","findIndex","element","beadsToKeep","children","trigger","icon","fileName","_jsxFileName","lineNumber","columnNumber","header","content","actions","key","positive","onClick","_c","$RefreshReg$"],"sources":["/Users/mariahjadegardner/UTA/FA24/Research/string-theory/react-coloring/src/components/PaperControls.jsx"],"sourcesContent":["import React from 'react';\nimport { Icon, Button, Modal, ButtonGroup } from 'semantic-ui-react';\nimport paper from 'paper';\nimport axios from 'axios';\nimport FileSaver from 'file-saver';\nimport { BEAD_COLORS, BEAD_COLORS_NAMES } from '../AppConfig.jsx';\nimport { exportSVG } from '../javascripts/Paper.js';\n\nconst PaperControls = ({  selectedColor, version, projectName }) => {\n  const trashInteraction = () => {\n    paper.project.clear();\n  };\n\n  const handleExportSTL = async () => {\n    const prevZoom = paper.view.zoom;\n    paper.view.zoom = 1;\n  \n    for (let colorIndex = 0; colorIndex < BEAD_COLORS.length; colorIndex++) {\n      const color = BEAD_COLORS[colorIndex];\n      const colorName = BEAD_COLORS_NAMES[colorIndex];\n  \n      // Filter beads by color\n      const beadsToRemove = paper.project.getItems({\n        name: 'bead',\n        match: function (item) {\n          return item.fillColor && item.fillColor.toCSS(true) !== color;\n        },\n      });\n  \n      beadsToRemove.forEach(bead => bead.remove());\n  \n      const svgString = exportSVG();\n      const blob = new Blob([svgString], { type: 'image/svg+xml' });\n      const formData = new FormData();\n      formData.append('svg', blob, `design_${colorName}.svg`);\n  \n      // Generate the filename based on project name, color, and version\n      const filename = `${projectName.toLowerCase().replace(/\\s+/g, '_')}_${colorName}_${version}.stl`;\n  \n      try {\n        const response = await axios.post('https://orange-barnacle-vx575vg799c6qgq-3001.app.github.dev/convert-svg-to-stl', formData, {\n          responseType: 'blob',\n        });\n        FileSaver.saveAs(response.data, filename);\n      } catch (error) {\n        console.error(`Error exporting STL for color ${colorName}:`, error);\n      }\n  \n      // Add back the removed beads\n      beadsToRemove.forEach(bead => paper.project.activeLayer.addChild(bead));\n    }\n  \n    paper.view.zoom = prevZoom;\n  };  \n\n  const handleExportSVG = (selectedColor) => {\n    const prevZoom = paper.view.zoom;\n    paper.view.zoom = 1;\n    console.log(\"Selected color:\", selectedColor, BEAD_COLORS);  // Check selectedColor value\n    \n    const colorIndex = BEAD_COLORS.findIndex(element => element === selectedColor);\n    const colorName = BEAD_COLORS_NAMES[colorIndex];\n    const filename = `${projectName.toLowerCase().replace(/\\s+/g, '_')}_${colorName}_${version}.svg`;\n\n    var beadsToRemove = paper.project.getItems({\n      name: 'bead',\n      match: function(item) {\n        return item.fillColor && item.fillColor.toCSS(true) !== selectedColor;\n      }\n    });\n    var beadsToKeep = paper.project.getItems({\n      name: 'bead',\n      match: function(item) {\n        return item.fillColor && item.fillColor.toCSS(true) === selectedColor;\n      }\n    });\n    beadsToRemove.forEach(bead => bead.remove());\n    const svgString = exportSVG();\n    console.log(\"Color name resolved:\", colorName, selectedColor);  // Log the resolved color name\n    console.log(\"Filename:\", filename);  // Log the filename being used\n    const blob = new Blob([svgString], { type: 'image/svg+xml' });\n    FileSaver.saveAs(blob, filename);\n    beadsToRemove.forEach(bead => paper.project.activeLayer.addChild(bead));\n    paper.view.zoom = prevZoom;\n  };\n  \n\n  return (\n    <div>\n      <Modal\n        trigger={<Button color='red' icon><Icon name='trash' />Restart</Button>}\n        header='Are you sure you want to destroy your masterpiece?'\n        content='This action cannot be undone.'\n        actions={['Keep It', { key: 'done', content: 'Nuke It', positive: true, onClick: trashInteraction }]}\n      />\n      <ButtonGroup>\n        <Button icon onClick={()=>handleExportSTL(selectedColor)}>\n          <Icon name='download' />\n          STL\n        </Button>\n        <Button icon onClick={()=>handleExportSVG(selectedColor)}>\n          <Icon name='download' />\n          SVG\n        </Button>\n      </ButtonGroup>\n    </div>\n  );\n};\n\nexport { PaperControls };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}